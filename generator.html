<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>海报代码生成器</title>

<style>
    body {
        background:#f0f0f0;
        font-family: Arial, sans-serif;
        padding: 40px 20px;
        color:#333;
        display:flex;
        justify-content:center;
    }

    .container {
        width:100%;
        max-width:700px;
    }

    h1 {
        font-weight: 600;
        margin-bottom: 25px;
        text-align:center;
    }

    .box {
        background:#fff;
        padding:25px 30px;
        border-radius:12px;
        box-shadow:0 4px 15px rgba(0,0,0,0.08);
        margin-bottom:30px;
    }

    label { 
        font-weight:600; 
        margin-top:18px; 
        display:block; 
    }

    input, select {
        width:100%;
        padding:14px;
        font-size:16px;
        border-radius:8px;
        border:1px solid #ccc;
        margin-top:6px;
        box-sizing:border-box;
    }

    button {
        padding:12px 20px;
        border:0;
        border-radius:8px;
        cursor:pointer;
        font-size:16px;
    }

    .btn-gen { 
        background:#4285f4; 
        color:#fff; 
        margin-top:25px; 
        width:100%;
    }

    .btn-copy { 
        background:#34a853; 
        color:#fff; 
        margin-top:12px; 
        width:100%;
    }

    .result-item {
        background:#fff;
        padding:15px;
        border-radius:10px;
        box-shadow:0 3px 10px rgba(0,0,0,0.06);
        margin-bottom:18px;
    }

    textarea {
        width:100%;
        height:150px;
        border-radius:8px;
        border:1px solid #ccc;
        padding:10px;
        font-family: Consolas, monospace;
        font-size:14px;
        box-sizing:border-box;
    }

    /* 提示文字 */
    #msg {
        margin-top:15px;
        height:24px;
        font-size:14px;
        font-weight:600;
        opacity:0;
        transition: opacity .3s;
        text-align:center;
    }
</style>

</head>
<body>

<div class="container">

<h1>海报代码生成器</h1>

<div class="box">

    <label>影片名称</label>
    <input id="title" placeholder="例如：长安的荔枝">

    <label>海报文件名（自动加 data/images/）</label>
    <input id="poster" placeholder="例如：cadlz.jpg">

    <label>下载链接</label>
    <input id="link" placeholder="例如：https://xxxx">

    <label>评分星星（1~5）</label>
    <select id="stars">
        <option value="★">★</option>
        <option value="★★">★★</option>
        <option value="★★★" selected>★★★</option>
        <option value="★★★★">★★★★</option>
        <option value="★★★★★">★★★★★</option>
    </select>

    <label>是否有资源？</label>
    <select id="source">
        <option value="no">❌ 无资源</option>
        <option value="yes">✔ 有资源（加 has-source）</option>
    </select>

    <button class="btn-gen" onclick="generate()">生成代码</button>

    <div id="msg"></div>

</div>

<h2 style="text-align:center; margin-bottom:15px;">生成结果</h2>
<div id="result"></div>

</div>

<script>
function showMsg(text, ok=true) {
    const msg = document.getElementById("msg");
    msg.style.color = ok ? "#34a853" : "#d93025";
    msg.textContent = text;
    msg.style.opacity = 1;
    setTimeout(()=> msg.style.opacity = 0, 1500);
}

function generate() {
    const title = document.getElementById("title").value.trim();
    const poster = document.getElementById("poster").value.trim();
    const link = document.getElementById("link").value.trim();
    const stars = document.getElementById("stars").value;
    const hasSource = document.getElementById("source").value === "yes";

    if (!title || !poster || !link) {
        showMsg("请填写完整信息！", false);
        return;
    }

    const className = hasSource ? "post-box-image has-source" : "post-box-image";

    const code =
`<article class="post-box">
    <div class="post-box-container">
        <div class="${className}" style="background-image: url(data/images/${poster});">
            <span></span>
        </div>
        <div class="post-box-text">
            <h2 class="post-box-title">
                <a href="${link}" target="_blank" rel="bookmark">${title}</a>
            </h2>
            <div class="countdown">${stars}</div>
        </div>
    </div>
</article>`;

    const box = document.createElement("div");
    box.className = "result-item";

    box.innerHTML = `
        <textarea>${code}</textarea>
        <button class="btn-copy" onclick="copyText(this)">复制代码</button>
    `;

    document.getElementById("result").prepend(box);

    showMsg("生成成功！");
}

function copyText(btn) {
    const text = btn.previousElementSibling.value;
    navigator.clipboard.writeText(text).then(()=>{
        btn.textContent = "已复制！";
        btn.style.background = "#1b8f3c";
        setTimeout(()=>{
            btn.textContent = "复制代码";
            btn.style.background = "#34a853";
        },1300);
    });
}
</script>

</body>
</html>
